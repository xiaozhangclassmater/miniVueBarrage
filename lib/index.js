(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["miniVueBarrage"]=e():t["miniVueBarrage"]=e()})(self,(function(){return function(){var t={9662:function(t,e,r){var n=r(614),i=r(6330),o=TypeError;t.exports=function(t){if(n(t))return t;throw o(i(t)+" is not a function")}},9670:function(t,e,r){var n=r(111),i=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw o(i(t)+" is not an object")}},1318:function(t,e,r){var n=r(5656),i=r(1400),o=r(6244),a=function(t){return function(e,r,a){var s,u=n(e),c=o(u),l=i(a,c);if(t&&r!=r){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},3658:function(t,e,r){"use strict";var n=r(9781),i=r(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,s=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(i(t)&&!a(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4326:function(t,e,r){var n=r(1702),i=n({}.toString),o=n("".slice);t.exports=function(t){return o(i(t),8,-1)}},9920:function(t,e,r){var n=r(2597),i=r(3887),o=r(1236),a=r(3070);t.exports=function(t,e,r){for(var s=i(e),u=a.f,c=o.f,l=0;l<s.length;l++){var f=s[l];n(t,f)||r&&n(r,f)||u(t,f,c(e,f))}}},8880:function(t,e,r){var n=r(9781),i=r(3070),o=r(9114);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:function(t,e,r){var n=r(614),i=r(3070),o=r(6339),a=r(3072);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:e;if(n(r)&&o(r,c,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(l){}u?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},3072:function(t,e,r){var n=r(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9781:function(t,e,r){var n=r(7293);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,r="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:r}},317:function(t,e,r){var n=r(7854),i=r(111),o=n.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},7207:function(t){var e=TypeError,r=9007199254740991;t.exports=function(t){if(t>r)throw e("Maximum allowed index exceeded");return t}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,r){var n,i,o=r(7854),a=r(8113),s=o.process,u=o.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(n=l.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,r){var n=r(7854),i=r(1236).f,o=r(8880),a=r(8052),s=r(3072),u=r(9920),c=r(4705);t.exports=function(t,e){var r,l,f,h,p,g,d=t.target,y=t.global,v=t.stat;if(l=y?n:v?n[d]||s(d,{}):(n[d]||{}).prototype,l)for(f in e){if(p=e[f],t.dontCallGetSet?(g=i(l,f),h=g&&g.value):h=l[f],r=c(y?f:d+(v?".":"#")+f,t.forced),!r&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),a(l,f,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,r){var n=r(7293);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,r){var n=r(4374),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,r){var n=r(9781),i=r(2597),o=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,c=s&&(!n||n&&a(o,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:c}},1702:function(t,e,r){var n=r(4374),i=Function.prototype,o=i.call,a=n&&i.bind.bind(o,o);t.exports=n?a:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,r){var n=r(7854),i=r(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t]):n[t]&&n[t][e]}},8173:function(t,e,r){var n=r(9662),i=r(8554);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},7854:function(t,e,r){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,r){var n=r(1702),i=r(7908),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,r){var n=r(9781),i=r(7293),o=r(317);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,r){var n=r(1702),i=r(7293),o=r(4326),a=Object,s=n("".split);t.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?s(t,""):a(t)}:a},2788:function(t,e,r){var n=r(1702),i=r(614),o=r(5465),a=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return a(t)}),t.exports=o.inspectSource},9909:function(t,e,r){var n,i,o,a=r(4811),s=r(7854),u=r(111),c=r(8880),l=r(2597),f=r(5465),h=r(6200),p=r(3501),g="Object already initialized",d=s.TypeError,y=s.WeakMap,v=function(t){return o(t)?i(t):n(t,{})},b=function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw d("Incompatible receiver, "+t+" required");return r}};if(a||f.state){var m=f.state||(f.state=new y);m.get=m.get,m.has=m.has,m.set=m.set,n=function(t,e){if(m.has(t))throw d(g);return e.facade=t,m.set(t,e),e},i=function(t){return m.get(t)||{}},o=function(t){return m.has(t)}}else{var w=h("state");p[w]=!0,n=function(t,e){if(l(t,w))throw d(g);return e.facade=t,c(t,w,e),e},i=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:n,get:i,has:o,enforce:v,getterFor:b}},3157:function(t,e,r){var n=r(4326);t.exports=Array.isArray||function(t){return"Array"==n(t)}},614:function(t,e,r){var n=r(4154),i=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,r){var n=r(7293),i=r(614),o=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r==l||r!=c&&(i(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(o,".").toLowerCase()},u=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,r){var n=r(614),i=r(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:n(t)||t===o}:function(t){return"object"==typeof t?null!==t:n(t)}},1913:function(t){t.exports=!1},2190:function(t,e,r){var n=r(5005),i=r(614),o=r(7976),a=r(3307),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&o(e.prototype,s(t))}},6244:function(t,e,r){var n=r(7466);t.exports=function(t){return n(t.length)}},6339:function(t,e,r){var n=r(1702),i=r(7293),o=r(614),a=r(2597),s=r(9781),u=r(6530).CONFIGURABLE,c=r(2788),l=r(9909),f=l.enforce,h=l.get,p=String,g=Object.defineProperty,d=n("".slice),y=n("".replace),v=n([].join),b=s&&!i((function(){return 8!==g((function(){}),"length",{value:8}).length})),m=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===d(p(e),0,7)&&(e="["+y(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?g(t,"name",{value:e,configurable:!0}):t.name=e),b&&r&&a(r,"arity")&&t.length!==r.arity&&g(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=f(t);return a(n,"source")||(n.source=v(m,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&h(this).source||c(this)}),"toString")},4758:function(t){var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},3070:function(t,e,r){var n=r(9781),i=r(4664),o=r(3353),a=r(9670),s=r(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",h="configurable",p="writable";e.f=n?o?function(t,e,r){if(a(t),e=s(e),a(r),"function"===typeof t&&"prototype"===e&&"value"in r&&p in r&&!r[p]){var n=l(t,e);n&&n[p]&&(t[e]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:f in r?r[f]:n[f],writable:!1})}return c(t,e,r)}:c:function(t,e,r){if(a(t),e=s(e),a(r),i)try{return c(t,e,r)}catch(n){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1236:function(t,e,r){var n=r(9781),i=r(6916),o=r(5296),a=r(9114),s=r(5656),u=r(4948),c=r(2597),l=r(4664),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=u(e),l)try{return f(t,e)}catch(r){}if(c(t,e))return a(!i(o.f,t,e),t[e])}},8006:function(t,e,r){var n=r(6324),i=r(748),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},7976:function(t,e,r){var n=r(1702);t.exports=n({}.isPrototypeOf)},6324:function(t,e,r){var n=r(1702),i=r(2597),o=r(5656),a=r(1318).indexOf,s=r(3501),u=n([].push);t.exports=function(t,e){var r,n=o(t),c=0,l=[];for(r in n)!i(s,r)&&i(n,r)&&u(l,r);while(e.length>c)i(n,r=e[c++])&&(~a(l,r)||u(l,r));return l}},5296:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2140:function(t,e,r){var n=r(6916),i=r(614),o=r(111),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&i(r=t.toString)&&!o(s=n(r,t)))return s;if(i(r=t.valueOf)&&!o(s=n(r,t)))return s;if("string"!==e&&i(r=t.toString)&&!o(s=n(r,t)))return s;throw a("Can't convert object to primitive value")}},3887:function(t,e,r){var n=r(5005),i=r(1702),o=r(8006),a=r(5181),s=r(9670),u=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(s(t)),r=a.f;return r?u(e,r(t)):e}},4488:function(t,e,r){var n=r(8554),i=TypeError;t.exports=function(t){if(n(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,r){var n=r(2309),i=r(9711),o=n("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,r){var n=r(7854),i=r(3072),o="__core-js_shared__",a=n[o]||i(o,{});t.exports=a},2309:function(t,e,r){var n=r(1913),i=r(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.1",mode:n?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,r){var n=r(7392),i=r(7293),o=r(7854),a=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!a(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1400:function(t,e,r){var n=r(9303),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},5656:function(t,e,r){var n=r(8361),i=r(4488);t.exports=function(t){return n(i(t))}},9303:function(t,e,r){var n=r(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:n(e)}},7466:function(t,e,r){var n=r(9303),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},7908:function(t,e,r){var n=r(4488),i=Object;t.exports=function(t){return i(n(t))}},7593:function(t,e,r){var n=r(6916),i=r(111),o=r(2190),a=r(8173),s=r(2140),u=r(5112),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var r,u=a(t,l);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!i(r)||o(r))return r;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},4948:function(t,e,r){var n=r(7593),i=r(2190);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(r){return"Object"}}},9711:function(t,e,r){var n=r(1702),i=0,o=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+o,36)}},3307:function(t,e,r){var n=r(6293);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,r){var n=r(9781),i=r(7293);t.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,r){var n=r(7854),i=r(614),o=n.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,r){var n=r(7854),i=r(2309),o=r(2597),a=r(9711),s=r(6293),u=r(3307),c=n.Symbol,l=i("wks"),f=u?c["for"]||c:c&&c.withoutSetter||a;t.exports=function(t){return o(l,t)||(l[t]=s&&o(c,t)?c[t]:f("Symbol."+t)),l[t]}},7658:function(t,e,r){"use strict";var n=r(2109),i=r(7908),o=r(6244),a=r(3658),s=r(7207),u=r(7293),c=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},f=c||!l();n({target:"Array",proto:!0,arity:1,forced:f},{push:function(t){var e=i(this),r=o(e),n=arguments.length;s(r+n);for(var u=0;u<n;u++)e[r]=arguments[u],r++;return a(e,r),r}})}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}!function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}();var n={};return function(){"use strict";r.r(n),r.d(n,{default:function(){return W},miniVueBarrage:function(){return M}});var t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"barrage"},[e("div",{ref:"barrageContainer",staticClass:"barrage-container"},[e("div",{ref:"halfScreenContainer",staticClass:"barrage-half-screen"},[t._l(t.filterList.level1,(function(r){return[e("BarrageItem",{key:r.id,class:{pauseAnimation:t.isPause},attrs:{item:r},on:{save:t.saveClientWidth,destory:t.destoryBraageItem}})]}))],2),t.fullScreen?e("div",{staticClass:"barrage-full-screen"},[t._l(t.filterList.level2,(function(r){return[e("BarrageItem",{key:r.id,class:{pauseAnimation:t.isPause},attrs:{item:r},on:{save:t.saveClientWidth,destory:t.destoryBraageItem}})]}))],2):t._e()])])},e=[],i=function(){var t=this,e=t._self._c;return e("div",{ref:"item",staticClass:"barrage-item start ordinaryOperate",class:[t.options?t.options.className:"",t.isPause?"pausedAnimation":""],style:t.bindStyle,on:{click:function(e){return t.handleClickBarrage(t.item.url)},animationend:function(e){return t.destroyBarrageItem(t.item)}}},[t.isMyBarrage?e("VueSvg"):t._e(),t._v(" "+t._s(t.item.content)+" ")],1)},o=[];const a={LEVEL1:1,LEVEL2:2},s={MYBARRAGE:"myBarrage"};var u=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"logo",style:t.styles,attrs:{viewBox:"0 0 128 128","data-v-7bd21367":""}},[e("path",{attrs:{fill:"#42b883",d:"M78.8,10L64,35.4L49.2,10H0l64,110l64-110C128,10,78.8,10,78.8,10z","data-v-7bd21367":""}}),e("path",{attrs:{fill:"#35495e",d:"M78.8,10L64,35.4L49.2,10H25.6L64,76l38.4-66H78.8z","data-v-7bd21367":""}})])},c=[],l={props:{styles:{type:Object,default:()=>({width:"15px",height:"15px"})}}},f=l;function h(t,e,r,n,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}var p=h(f,u,c,!1,null,"1d0ac1ba",null),g=p.exports,d=function(){var t=this,e=t._self._c;return t.options.show?e("div",{staticClass:"barrage-Icon",class:t.options.div?t.options.div.className:"",style:{...t.options.div?t.options.div.style:{}}},[t.options.i&&t.options.i.showIcon?e("i",{staticClass:"icon",class:t.options.i?t.options.i.className:"",style:{...t.options.i?t.options.i.style:{}}},[e("img",{attrs:{src:t.options.i.icon,alt:""}})]):t._e()]):t._e()},y=[],v={props:{options:{type:Object,default:()=>({})}}},b=v,m=h(b,d,y,!1,null,"4c81e71c",null),w=m.exports,x={components:{icon:w,VueSvg:g},name:"barrageItem",props:{item:{type:Object,default:()=>{}},options:{type:Object,default:()=>({})}},data(){return{isPause:!1}},mounted(){this.$emit("save",this.$refs.item.clientWidth||0)},methods:{destroyBarrageItem(t){this.$emit("destory",t)},handleClickBarrage(t){this.isPause=!this.isPause}},computed:{isMyBarrage(){return this.item.type===s.MYBARRAGE},bindBraageItemStyle(){const{delay:t,top:e,color:r,args:n}=this.item;return console.log("top",e),{"--runTime":t,"--offsetWidth":`-${n.offsetWidth}px`,top:e,color:r}},bindStyle(){return{...this.bindBraageItemStyle}}}},S=x,C=h(S,i,o,!1,null,"d925f77a",null),O=C.exports;function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function D(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function j(t){var e=D(t,"string");return"symbol"===B(e)?e:String(e)}function L(t,e,r){return e=j(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(7658);class T{constructor(t){const{id:e,delay:r,level:n,top:i,url:o,content:a,type:s,color:u,animationPlayState:c,...l}=t;this.id=e,this.delay=r,this.level=n,this.top=i,this.url=o,this.content=a,this.type=s,this.animationPlayState=c,this.color=u,this.args=l}}class P{constructor(t){L(this,"getBarrageList",(()=>this.barrageList)),L(this,"getBarrageTimer",(()=>this.barrageTimer)),L(this,"saveOffsetWidth",(t=>{this.offsetWidth=t})),L(this,"saveBarrageItemClientWidth",((t,e)=>{this.everyRowsLengths[e]=this.everyRowsLengths[e]+t})),L(this,"setDefautColor",(t=>{this.defaultColor!==t&&(this.defaultColor=t)})),L(this,"computedTopValue",((t=0)=>t*this.BarrageVueInstance.rowHeight+"px")),this.BarrageVueInstance=t,this.barrageList=[],this.cacheSourceBarrageList=[],this.bacthDeleteIds=[],this.barrageTimer=null,this.maxDeleteCounter=0,this.lastDeleteCounter=0,this.currentRow=0,this.createTotal=0,this.total=0,this.maxRows=t.rows/2,this.fullScreen=t.fullScreen,this.delay=t.delay,this.createTime=t.createTime,this.isBatchDestory=t.isBatchDestory,this.batchDestoryNum=t.batchDestoryNum,this.level=1,this.top=0,this.offsetWidth=0,this.defaultColor="#fff",this.everyRowsLengths=new Array(this.maxRows).fill(0)}addBarrage(t){this.barrageList.push(t)}addDeleteIdInQueue(t){this.bacthDeleteIds.push(t),this.bacthDeleteHandler()}createBarrage(t,e=!1){e&&(this.currentRow=this.everyRowsLengths.findIndex((t=>t===Math.min(...this.everyRowsLengths))),this.top=this.computedTopValue(this.currentRow),this.everyRowsLengths[this.currentRow]=this.everyRowsLengths[this.currentRow]+150,this.currentRow=this.currentRow+1);const r={url:t?.url||"",color:t?.color||this.defaultColor,content:t?.content||"",id:t?.id||Date.now(),top:t?.top||this.top,level:t?.level||1,delay:t?.delay||`${this.delay}s`,type:t?.type||s.MYBARRAGE,offsetWidth:t?.offsetWidth||this.offsetWidth,animationPlayState:t?.animationPlayState||"running"};return new T(r)}bacthDeleteHandler(){if(0===this.maxDeleteCounter&&this.lastDeleteCounter===this.bacthDeleteIds.length)this.batchDelete(0,this.lastDeleteCounter),this.lastDeleteCounter=0,this.bacthDeleteIds=[];else if(this.maxDeleteCounter>0){if(this.bacthDeleteIds.length!==this.batchDestoryNum)return;this.batchDelete(0,this.batchDestoryNum),this.bacthDeleteIds.splice(0,this.batchDestoryNum),this.maxDeleteCounter=this.maxDeleteCounter-1}}batchDelete(t,e){0!==this.barrageList.length&&this.barrageList.splice(t,e)}deleteBarrage(t){const e=this.barrageList.findIndex((e=>e.id===t));-1!==e&&this.barrageList.splice(e,1)}deleteAllBarrage(){this.barrageList=[]}timedCreationBarrage(){this.barrageTimer=setInterval((()=>{if(!this.cacheSourceBarrageList[this.createTotal])return this.clearTimer(this.barrageTimer);this.generateBarrage()}),1e3*this.createTime)}generateBarrage(){this.currentRow>=this.maxRows&&(this.currentRow=0);const t=this.cacheSourceBarrageList[this.createTotal];this.level=this.fullScreen?Math.floor(2*Math.random())+1:1,this.top=this.computedTopValue(this.currentRow);const e=Object.assign(t,{level:this.level,top:this.top,delay:`${this.delay}s`,offsetWidth:this.offsetWidth}),r=this.createBarrage(e);this.addBarrage(r),this.createTotal=this.createTotal+1,this.currentRow=this.currentRow+1}close(){this.clearTimer(this.barrageTimer),this.resetData()}play(t){this._init(t||this.cacheSourceBarrageList)}pause(){}reset(t){this.close(),this._init(t||this.cacheSourceBarrageList)}clearTimer(t){clearInterval(t),this.barrageTimer=null}resetData(){this.total=0,this.createTotal=0,this.barrageList=[],this.maxDeleteCounter=0,this.lastDeleteCounter=0,this.everyRowsLengths=new Array(this.maxRows).fill(0)}_init(t){!Array.isArray(t)||Array.isArray(t)&&0===t.length||(this.cacheSourceBarrageList=t,this.total=t.length,this.isBatchDestory&&(this.maxDeleteCounter=Math.floor(t.length/this.batchDestoryNum),this.lastDeleteCounter=t.length%this.batchDestoryNum),this.timedCreationBarrage())}}var _={name:"miniVueBarrage",components:{BarrageItem:O},props:{barrages:{type:Array,default:[],required:!0},rows:{type:Number,default:8},fullScreen:{type:Boolean,default:!1},delay:{type:Number,default:8},createTime:{type:Number,default:1},barrageLen:{type:Number,default:20},isBatchDestory:{type:Boolean,default:!1},batchDestoryNum:{type:Number,default:10},definStyle:{type:Object,default:()=>({border:"0.005rem solid rgba(255,117,21,1)"})},barrageTypeCallback:{type:Function}},created(){this.barrageManager=new P(this)},mounted(){this.init()},data(){return{barrageManager:null,currentRow:0,isPause:!1}},methods:{init(){this.barrageManager.saveOffsetWidth(this.getBarrageCtnOffsetWidth),this.barrageManager.play(this.barrages)},destoryBraageItem({id:t}){if(!this.isBatchDestory)return this.barrageManager.deleteBarrage(t);this.barrageManager.addDeleteIdInQueue(t)},add(t){this.barrageManager.addBarrage(this.barrageManager.createBarrage(t,!0))},reset(t){this.barrageManager.reset(t)},pause(){this.isPause=!this.isPause},close(){this.barrageManager.close(),this.resetState()},play(t){let e=this.barrageManager.getBarrageTimer();e||(this.barrageManager.saveOffsetWidth(this.getBarrageCtnOffsetWidth),this.barrageManager.play(t))},resetState(){this.isPause=!1,this.currentRow=0},changeColor(t){this.barrageManager.setDefautColor(t)},saveClientWidth(t){this.currentRow>=this.rows/2&&(this.currentRow=0),this.barrageManager.saveBarrageItemClientWidth(t,this.currentRow),this.currentRow=this.currentRow+1}},computed:{filterList(){return{level1:this.barrageManager.getBarrageList().filter((t=>t.level===a.LEVEL1))||[],level2:this.barrageManager.getBarrageList().filter((t=>t.level===a.LEVEL2))||[]}},getBarrageContainerClientHeight(){return this.$refs.barrageContainer.clientHeight},getBarrageCtnOffsetWidth(){return this.$refs.barrageContainer.offsetWidth},rowHeight(){let t=this.getBarrageContainerClientHeight,e=this.fullScreen?t:t/2;return parseInt(e/(this.fullScreen?this.rows:this.rows/2))}},destroyed(){this.barrageManager.close()}},R=_,I=h(R,t,e,!1,null,"75abbcae",null),M=I.exports;const E="1.0.0",A=[M],N=t=>{A.forEach((e=>{t.component(e.name,e)}))};"undefined"!==typeof window&&window.Vue&&N(window.Vue);var W={install:N,version:E}}(),n}()}));